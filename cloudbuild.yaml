steps:
  # Step 1: Build the JAR file using Gradle
  - name: 'gcr.io/cloud-builders/gradle'
    args: [ 'build' ]

  # Step 2: Build the Docker image
  - name: 'gcr.io/cloud-builders/docker'
    args: [ 'build', '-t', 'gcr.io/cs5409kubernetes/service2', '.' ]

  # Step 3: Push the Docker image to Google Container Registry
  - name: 'gcr.io/cloud-builders/docker'
    args: [ 'push', 'gcr.io/cs5409kubernetes/service2' ]

options:
  logging: CLOUD_LOGGING_ONLY  # Use Google Cloud Logging

images:
  - 'gcr.io/cs5409kubernetes/service2'